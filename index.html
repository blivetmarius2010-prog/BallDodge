<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Retro Dodge</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  background:#111;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  font-family:monospace;
}

.console{
  background:#0e7490;
  padding:20px;
  border-radius:20px;
  width:360px;
}

.screen{
  background:#1e3a8a;
  height:240px;
  border:6px solid #000;
  position:relative;
  overflow:hidden;
  image-rendering:pixelated;
}

.player{
  width:16px;
  height:16px;
  background:#22c55e;
  position:absolute;
  bottom:20px;
  left:112px;
}

.enemy{
  width:14px;
  height:14px;
  background:#ef4444;
  position:absolute;
}

.gameover{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  color:white;
}

.controls{
  margin-top:14px;
  display:flex;
  justify-content:space-between;
}

.dpad{
  display:grid;
  grid-template-columns:40px 40px 40px;
  grid-template-rows:40px 40px 40px;
  gap:4px;
}

.btn{
  background:#222;
  color:white;
  border-radius:8px;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:18px;
  user-select:none;
}

.action{
  width:50px;
  height:50px;
  background:#333;
  border-radius:50%;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:18px;
}
</style>
</head>

<body>

<div class="console">
  <div class="screen" id="screen">
    <div class="player" id="player"></div>

    <div class="gameover" id="gameover">
      <div>GAME OVER</div>
      <button onclick="restart()">REJOUER</button>
    </div>
  </div>

  <div class="controls">
    <div class="dpad">
      <div></div>
      <div class="btn" id="up">⬆️</div>
      <div></div>
      <div class="btn" id="left">⬅️</div>
      <div></div>
      <div class="btn" id="right">➡️</div>
      <div></div><div></div><div></div>
    </div>

    <div class="action" id="jump">A</div>
  </div>
</div>

<script>
const player=document.getElementById("player");
const screen=document.getElementById("screen");
const gameover=document.getElementById("gameover");

let x=112,y=0,vy=0,jump=false,run=true;
let enemies=[];

function update(){
  player.style.left=x+"px";
  player.style.bottom=(20+y)+"px";
}

function spawn(){
  if(!run)return;
  const e=document.createElement("div");
  e.className="enemy";
  e.style.left=Math.random()*210+"px";
  e.style.top="-20px";
  screen.appendChild(e);
  enemies.push(e);
}

setInterval(spawn,900);

function loop(){
  if(run){
    if(jump){
      y+=vy; vy-=1;
      if(y<=0){y=0;jump=false}
      update();
    }

    enemies.forEach((e,i)=>{
      e.style.top=e.offsetTop+4+"px";
      if(
        e.offsetTop>200-y &&
        Math.abs(e.offsetLeft-x)<14
      ) end();
      if(e.offsetTop>260){e.remove();enemies.splice(i,1)}
    });
  }
  requestAnimationFrame(loop);
}

function end(){
  run=false;
  gameover.style.display="flex";
}

function restart(){
  enemies.forEach(e=>e.remove());
  enemies=[];
  x=112;y=0;run=true;
  gameover.style.display="none";
  update();
}

document.getElementById("left").ontouchstart=()=>x=Math.max(0,x-16);
document.getElementById("right").ontouchstart=()=>x=Math.min(224,x+16);
document.getElementById("jump").ontouchstart=()=>{if(!jump){vy=14;jump=true}};

document.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft")x=Math.max(0,x-16);
  if(e.key==="ArrowRight")x=Math.min(224,x+16);
  if(e.key==="ArrowUp"&&!jump){vy=14;jump=true}
});

update();
loop();
</script>

</body>
</html>




